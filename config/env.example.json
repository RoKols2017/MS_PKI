{
  "domain": {
    "name": "contoso.local",
    "fqdn": "contoso.local",
    "netbios": "CONTOSO"
  },
  "ca0": {
    "name": "CONTOSO-Root-CA",
    "hostname": "ca0-root.contoso.local",
    "dnsName": "ca0-root.contoso.local",
    "commonName": "CONTOSO Root CA",
    "type": "StandaloneRootCA",
    "status": "offline",
    "crlPolicy": {
      "validityPeriod": {
        "value": 12,
        "units": "Months"
      },
      "overlapPeriod": {
        "value": 2,
        "units": "Weeks"
      },
      "deltaCRL": false
    }
  },
  "ca1": {
    "name": "CONTOSO-Issuing-CA",
    "hostname": "ca1-issuing.contoso.local",
    "dnsName": "ca1-issuing.contoso.local",
    "commonName": "CONTOSO Issuing CA",
    "type": "EnterpriseSubordinateCA",
    "status": "online",
    "serviceName": "CertSvc",
    "crlPolicy": {
      "validityPeriod": {
        "value": 7,
        "units": "Days"
      },
      "overlapPeriod": {
        "value": 1,
        "units": "Days"
      },
      "deltaCRL": true
    }
  },
  "iis": {
    "siteName": "Default Web Site",
    "webRootPath": "C:\\inetpub\\wwwroot",
    "pkiWebRoot": "C:\\inetpub\\wwwroot\\PKI",
    "certEnrollPath": "C:\\Windows\\System32\\CertSrv\\CertEnroll",
    "bindings": [
      {
        "protocol": "http",
        "port": 80,
        "hostname": ""
      }
    ]
  },
  "namespaces": {
    "canonical": {
      "aia": "/PKI/AIA",
      "cdp": "/PKI/CDP",
      "description": "Новый стандартный namespace"
    },
    "legacy": {
      "paths": [
        "/Certs",
        "/CertsAIA",
        "/IssCA",
        "/ssCA"
      ],
      "description": "Legacy пути для совместимости со старыми сертификатами"
    }
  },
  "endpoints": {
    "healthCheck": [
      "http://ca1-issuing.contoso.local/PKI/AIA",
      "http://ca1-issuing.contoso.local/PKI/CDP",
      "http://ca1-issuing.contoso.local/Certs",
      "http://ca1-issuing.contoso.local/CertsAIA"
    ],
    "crlUrls": [
      "http://ca1-issuing.contoso.local/PKI/CDP/{CAName}{CRLNameSuffix}{DeltaCRLAllowed}.crl",
      "http://ca1-issuing.contoso.local/Certs/{CAName}{CRLNameSuffix}{DeltaCRLAllowed}.crl"
    ],
    "aiaUrls": [
      "http://ca1-issuing.contoso.local/PKI/AIA/{CAName}_{CertificateName}.crt",
      "http://ca1-issuing.contoso.local/CertsAIA/{CAName}_{CertificateName}.crt"
    ]
  },
  "paths": {
    "certEnrollPath": "C:\\Windows\\System32\\CertSrv\\CertEnroll",
    "pkiWebRoot": "C:\\inetpub\\wwwroot\\PKI",
    "pkiAiaPath": "C:\\inetpub\\wwwroot\\PKI\\AIA",
    "pkiCdpPath": "C:\\inetpub\\wwwroot\\PKI\\CDP",
    "legacyCertsPath": "C:\\inetpub\\wwwroot\\Certs",
    "legacyCertsAiaPath": "C:\\inetpub\\wwwroot\\CertsAIA"
  },
  "copyRules": {
    "enabled": true,
    "fromCertEnroll": {
      "crl": {
        "enabled": true,
        "destinations": [
          "PKI/CDP",
          "Certs"
        ],
        "pattern": "*.crl"
      },
      "crt": {
        "enabled": true,
        "destinations": [
          "PKI/AIA",
          "CertsAIA"
        ],
        "pattern": "*.crt"
      }
    }
  },
  "crlPolicyTargets": {
    "root": {
      "validity": {
        "value": 12,
        "units": "Months",
        "min": 6,
        "max": 12
      },
      "overlap": {
        "value": 2,
        "units": "Weeks",
        "min": 1,
        "max": 2
      },
      "deltaCRL": false
    },
    "issuing": {
      "validity": {
        "value": 7,
        "units": "Days",
        "min": 7,
        "max": 14
      },
      "overlap": {
        "value": 1,
        "units": "Days",
        "min": 1,
        "max": 1
      },
      "deltaCRL": true
    }
  },
  "templates": {
    "required": [
      {
        "name": "User",
        "displayName": "Пользователь",
        "version": 2,
        "purpose": "ClientAuthentication",
        "eku": ["1.3.6.1.5.5.7.3.2"],
        "autoenrollment": true
      },
      {
        "name": "Computer",
        "displayName": "Компьютер",
        "version": 2,
        "purpose": "ClientAuthentication",
        "eku": ["1.3.6.1.5.5.7.3.2"],
        "autoenrollment": true
      },
      {
        "name": "WebServer",
        "displayName": "Веб-сервер",
        "version": 2,
        "purpose": "ServerAuthentication",
        "eku": ["1.3.6.1.5.5.7.3.1"],
        "autoenrollment": false
      },
      {
        "name": "Service",
        "displayName": "Служба",
        "version": 2,
        "purpose": "ClientAuthentication",
        "eku": ["1.3.6.1.5.5.7.3.2"],
        "autoenrollment": false
      }
    ],
    "deprecated": [
      {
        "name": "User-v1",
        "reason": "v1 template deprecated"
      }
    ]
  },
  "monitoring": {
    "crlExpiryThresholdDays": 3,
    "serviceChecks": {
      "certSvc": {
        "enabled": true,
        "serviceName": "CertSvc"
      },
      "w3svc": {
        "enabled": true,
        "serviceName": "W3SVC"
      }
    },
    "eventLogs": {
      "enabled": true,
      "sources": [
        "Microsoft-Windows-CertificateServicesClient-CertificateEnrollment",
        "Microsoft-Windows-CertificateServicesClient-AutoEnrollment"
      ],
      "lookbackHours": 24
    }
  },
  "backup": {
    "enabled": true,
    "defaultPath": "output/backups",
    "includeRegistry": true,
    "includeIisConfig": true,
    "includeCertificates": true,
    "includeCrl": true
  },
  "logging": {
    "level": "Info",
    "format": "Structured",
    "outputPath": "output/logs",
    "includeConsole": true,
    "includeFile": true
  }
}
